<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>OX.P</title>

    <link rel="shortcut icon" href="img/faicon.ico" type="image/x-icon">
    <link rel="stylesheet" type="text/css" href="{% static 'css/product.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/select.css' %}">

    <script type="text/javascript">
		var user = '{{request.user}}'

		function getToken(name) {
		    var cookieValue = null;
		    if (document.cookie && document.cookie !== '') {
		        var cookies = document.cookie.split(';');
		        for (var i = 0; i < cookies.length; i++) {
		            var cookie = cookies[i].trim();
		            // Does this cookie string begin with the name we want?
		            if (cookie.substring(0, name.length + 1) === (name + '=')) {
		                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
		                break;
		            }
		        }
		    }
		    return cookieValue;
		}
		var csrftoken = getToken('csrftoken')

		function getCookie(name) {
		    // Split cookie string and get all individual name=value pairs in an array
		    var cookieArr = document.cookie.split(";");

		    // Loop through the array elements
		    for(var i = 0; i < cookieArr.length; i++) {
		        var cookiePair = cookieArr[i].split("=");

		        /* Removing whitespace at the beginning of the cookie name
		        and compare it with the given string */
		        if(name == cookiePair[0].trim()) {
		            // Decode the cookie value and return
		            return decodeURIComponent(cookiePair[1]);
		        }
		    }

		    // Return null if not found
		    return null;
		}
		var cart = JSON.parse(getCookie('cart'))

		if (cart == undefined){
			cart = {}
			console.log('Cart Created!', cart)
			document.cookie ='cart=' + JSON.stringify(cart) + ";domain=;path=/"
		}
		console.log('Cart:', cart)

	</script>

</head>
<body>
    <header class="header">
        <nav class="navbar">
            <div class="navbar-content">
                <div class="navbar-logo">
                    <a class="navbar-brand" href="home.html">OXY.STORE</a>
                </div>
                <div class="navbar-info">
                    <ul class="navbar-list">
                        <li class="list-item"><a class="nav-link" href="{% url 'store' %}">Главная</a></li>
                        <li class="list-item"><a class="nav-link" id="act" href="{% url 'category' %}">Категории</a></li>
                        <li class="list-item"><a class="nav-link" href="#">О нас</a></li>
                    </ul>
                </div>
            </div>
            <div class="navbar-content">
                <div class="search">
                    <div>
                        <form action="{% url 'category' %}" method="get">
                            <input type="text" class="search-input" placeholder="Поиск по названию" name="text_search">
                            <button class="search-icon" type="submit" ><img src="{% static 'img/search.svg' %}" alt=""></button>
                        </form>
                    </div>
                </div>
                <div class="navbar-icons">
                    <ul class="icons-list">
                        <li class="icons-item"><a class="nav-link" href="#"><img src="{% static 'img/heart.svg' %}" alt=""></a></li>
                        <li class="icons-item"><a class="nav-link" href="{% url 'order' %}"><img src="{% static 'img/cart.svg' %}" alt=""> <span class="total-price">{{order.get_cart_total}}</span></a></li>
                        <li class="icons-item"><a class="nav-link disabled" href="#"><img src="{% static 'img/user.svg' %}" alt=""></a></li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>
    <div class="content">
        <div class="link-home">
            <a class="back-page" href="{% url 'category' %}"><img class="image-arrow" src="{% static 'img/arrow-left.svg' %}" alt="">Категории</a>
        </div>
        <div class="product">
            <div class="product-cart">
                <div class="product-cart-image"><img src="{{ product.imageURL }}" alt=""></div>
                <div class="product-main-info">
                    <div>
                        <div>
                            <p class="product-name">{{ product.name }}</p>
                            <p class="product-cat">{{product.cat.first}}</p>
                        </div>
                        <div>
                            <div class="available">
                                {% if product.digital %}
                                    <div class="product-barcode" style="margin-bottom: 20px;">
                                        <span class="available-text" style="color: #41C06C;">Are available</span>
                                    </div>
                                {% else %}
                                    <div class="product-barcode" style="margin-bottom: 30px;">
                                        <span class="available-text" style="color: #DA3838;">Not available</span>
                                    </div>
                                {% endif %}
                            </div>
                            <div class="product-info-count">
                                {% if product.digital %}
                                    <div class="container">
                                  <div class="select-box">
                                    <div class="options-container">
                                      <div class="option">
                                        <input type="radio" class="radio" id="automobiles" name="category"/>
                                        <label for="automobiles">100 ml</label>
                                      </div>
                                      <div class="option">
                                        <input type="radio" class="radio" id="film" name="category" />
                                        <label for="film">150 ml</label>
                                      </div>

                                      <div class="option">
                                        <input type="radio" class="radio" id="science" name="category" />
                                        <label for="science">200 ml</label>
                                      </div>

                                      <div class="option">
                                        <input type="radio" class="radio" id="art" name="category" />
                                        <label for="art">250 ml</label>
                                      </div>
                                    </div>
                                    <div class="selected">50 ml</div>
                                  </div>
                                </div>
                                {% else %}
                                    <div style="color: #363941; font-size: 20px; line-height: 22px; font-family: 'Gilroy Bold';">50 ml</div>
                                {% endif %}
                                <div class="count-min-plus">
                                    <button onclick="minusClick()"><img src="../img/minus.svg" alt=""></button>
                                    <div><p id="counter-label">1</p></div>
                                    <button onclick="plusClick()"><img src="../img/plus.svg" alt=""></button>
                                </div>
                            </div>
                        </div>
                        <div class="info-delivery">
                            <div>
                                <img src="{% static 'img/sale-black.svg' %}" alt="">
                                <p>Delivery by "Novaya pochta"</p>
                            </div>
                            <div>
                                <img src="{% static 'img/sale-black.svg' %}" alt="">
                                <p>Sending all over Ukraine</p>
                            </div>
                        </div>
                    </div>
                    <div class="product-sale">
                        <button data-product={{product.id}} data-action="add" class="button-sale btn-outline-secondary add-btn update-cart"><span>Купить</span></button>
                        <p class="product-price">${{ product.price }}</p>
                    </div>

                </div>
                <div class="click-hearth"><input class="hearth" type="button" onmousedown="viewDiv(this)"></div>
            </div>
            <div class="tab">
                <button class="tablinks" onclick="openCity(event, 'About')" id="defaultOpen">About the product</button>
                <button class="tablinks" onclick="openCity(event, 'Composition')">Composition</button>
            </div>
            <div id="About" class="tabcontent">
              <p>{{ product.about|linebreaks }}</p>
            </div>
            <div id="Composition" class="tabcontent">
              <p>{{ product.composition|linebreaks }}</p>
            </div>
        </div>
    </div>
    <div class="more-info">
        <p>Онлайн магазин Корейской косметики Oxy.store</p>
    </div>
    <footer class="footer">
        <div class="footer-content">
            <div class="container-second">
                <section class="">
                    <div class="row">
                      <div class="col-auto">
                        <p class="pt-2">
                          <strong>Подписаться на рассылку</strong>
                        </p>
                      </div>
                      <div class="navbar-search">
                        <div class="search">
                            <div>
                                <form action="{% url 'category' %}" method="get">
                                    <input type="text" class="search-input" placeholder="Введите почту" name="text_mail">
                                    <button class="search-icon" type="submit" ><img src="{% static 'img/mail.svg' %}" alt=""></button>
                                </form>
                            </div>
                        </div>
                      </div>
                    </div>
                </section>
                <div class="footer-icons">
                <ul class="footer-list-icons">
                    <li class="icon-item"><a class="nav-link" href="#"><img src="{% static 'img/icons8-tiktok.svg' %}" alt=""></a></li>
                    <li class="icon-item"><a class="nav-link" href="#"><img src="{% static 'img/youtube.svg' %}" alt=""></a></li>
                    <li class="icon-item"><a class="nav-link" href="#"><img src="{% static 'img/telegram.svg' %}" alt=""></a></li>
                    <li class="icon-item"><a class="nav-link" href="#"><img src="{% static 'img/inst.svg' %}" alt=""></a></li>
                </ul>
            </div>
            <div class="text-center p-3"><a class="text-down" href="#">© OXY online store 2022</a></div>
            </div>
            <div class="container-first">
                  <div class="footer-list">
                    <div class="footer-list-items">
                      <h5 class="text-uppercase">Клиентам</h5>
                      <ul class="list-unstyled">
                        <li><a href="#" class="text-white">Home page</a></li>
                        <li><a href="#" class="text-white">ALL Categories</a></li>
                        <li><a href="#" class="text-white">About Us</a></li>
                      </ul>
                    </div>
                    <div class="footer-list-items">
                      <h5 class="text-uppercase">Доставка</h5>
                      <ul class="list-unstyled mb-0">
                        <li><a href="#" class="text-white">Shipping and payment</a></li>
                        <li><a href="#" class="text-white">Agreement</a></li>
                        <li><a href="#" class="text-white">Wholesale clients</a></li>
                      </ul>
                    </div>
                    <div class="footer-list-items">
                      <h5 class="text-uppercase">Контакты</h5>
                      <ul class="list-unstyled">
                        <li><a href="#" class="text-white">093 38 48 050</a></li>
                        <li><a href="#" class="text-white">oxy.store@gmail.com</a></li>
                      </ul>
                    </div>
                  </div>
            </div>

        </div>
    </footer>
    <script>
        function viewDiv(ele) {
            if (ele.style.backgroundImage == 'url("../img/hearth-fill.svg")') {
                ele.style.backgroundImage="url(../img/Path.svg)";
            } else {
                ele.style.backgroundImage="url(../img/hearth-fill.svg)";
            }
        }
    </script>
    <script>
        function openCity(evt, info_text) {
          var i, tabcontent, tablinks;
          tabcontent = document.getElementsByClassName("tabcontent");
          for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
          }
          tablinks = document.getElementsByClassName("tablinks");
          for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(" active", "");
          }
          document.getElementById(info_text).style.display = "block";
          evt.currentTarget.className += " active";
        }

        // Get the element with id="defaultOpen" and click on it
        document.getElementById("defaultOpen").click();
    </script>
    <script>
        var counterVal = 1;

        function plusClick() {
            updateDisplay(++counterVal);
        }
        function minusClick() {
            if (counterVal > 1) {
                updateDisplay(--counterVal);
            }
        }

        function updateDisplay(val) {
            document.getElementById("counter-label").innerHTML = val;
        }
    </script>
    <script src="{% static 'js/select.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/cart.js' %}"></script>
</body>
</html>
